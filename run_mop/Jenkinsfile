import groovy.json.JsonSlurper

def mopData
def wholeFileData

pipeline {
    agent any
    stages {
        stage('Setup parameters') {
            steps {
                script {
                    properties([
                        parameters([
                            string( defaultValue: './mops/the-mop.json', name: 'MOP_FILE', trim: true ),
                        ])
                    ])
                }
            }
        }
        stage('Pre-Flight (automate MOP review') {
            steps {
                script {
                    wholeFileData = readFile(file: MOP_FILE)
                    println(wholeFileData)
                    mopData = new JsonSlurper().parseText(wholeFileData)
                    println(mopData)
                }
            }
        }
    }
}